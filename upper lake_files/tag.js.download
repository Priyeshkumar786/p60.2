(()=>{var e={exports:{}},t=e,o=e.exports;Object.defineProperty(o,"__esModule",{value:!0}),t.exports=s=>{if(s._CTZG?.bootloader&&!s?._CTZG?.bootloaderConfig)return{boot:()=>null};let c=s._CTZG||{},t=((s._CTZG=c).bootloader=c.bootloader||{},c.bootloader.version=c.bootloader.version||"9ce4787596eb13f85cfd04f7f276678040bd2850d93db08665b9ff86ee382943",c.isDebugMode=/CTI_FORCE_DEBUG=1/.test(s.document.cookie),s.CTI_FORCE_DEBUG=e=>{s.document.cookie="CTI_FORCE_DEBUG="+(e?"1":"0"),s.location.reload()},e=>e.reduce((e,t)=>e+" "+("object"==typeof t?JSON.stringify(t):t),"")),l={info:(...e)=>c.isDebugMode&&console.log("[Bootloader]: "+t(e)),error:(...e)=>c.isDebugMode&&console.error("[Bootloader]: "+t(e))},u=(e,t,o=void 0)=>{var r="string"==typeof t?t.split("."):t;let a=e,n=o;for(let i=0;i<r.length&&void 0!==(a=a[r[i]]);i+=1)i===r.length-1&&(n=a);return n};let i=e=>s.document.cookie.match(`(?:^|; )${e}=([^;]*)`)?.[1],d=(e,t)=>{c.bootloader[e]=t},p=e=>c.bootloader[e],o=e=>{let t=Object.fromEntries(s.document.cookie.split(";").map(e=>e.trim()).map(e=>e.split("=")));return Object.fromEntries(e.map(e=>[e,t[e]]))};let m=async(e,t)=>{var o;let r=e;return(p("tagData")?.isAnonymous||u(s,"_CTZ.user.anonymous"))&&((o=new URL(e)).searchParams.append("xct-anon","2"),r=o.toString()),fetch(r,t)},a=e=>{var{main:t,bundleMappings:o,mappings:r}=u(c.bootloader,"icc.bootloader.scripts"),a=Object.keys(o)[0],o=u(o,a);return o?(a=c.isDebugMode||e!==t?e:a,t=c.isDebugMode||e!==t?u(r,e):o.version,`https://${u(c.bootloader,"hostnames.static")}/asset/${a}/${t}.js`):l.error("No bundle found!")},e=e=>{var t=e.src.match("^https?://([^/]+)/.*$"),t=t?t[1]:"static.clicktripz.com",o=/compare-static/.test(t)?t.replace("compare-static","compare"):"www.clicktripz.com";return{hostName:o,apiHostName:/compare-static/.test(t)?t.replace("compare-static","compare"):"api.clicktripz.com",publisherAlias:e.getAttribute("data-alias")||null,publisherHash:e.getAttribute("data-publisher")||null,isAnonymous:"true"===e.getAttribute("data-anonymous"),fpcsEnabled:!/clicktripz\.com/.test(o)}},b=e=>{var t=p("adblockIsEnabled"),o=e=>new URL(`https://${e}/api/integrations/v1/constrain`),t=e.fpcsEnabled&&!t,r=i("_ctpuid"),a=o(e.hostName),o=o("www.clicktripz.com"),n=new URLSearchParams;if(null!==e.publisherAlias)n.set("publisherAlias",e.publisherAlias);else{if(null===e.publisherHash)return void l.error("Unable to determine constrainURL :: no publisher identifier");n.set("h",e.publisherHash)}return void 0!==r&&n.set("cpid",r),(t?(c.bootloader.useFPCSCookieSync=!0,r=a,(t=new URLSearchParams(n)).set("u",s.location.href),r.search=t.toString(),n.set("r",r.toString()),o.search=n.toString(),o):(n.set("u",s.location.href),a.search=n.toString(),a)).toString()},f=()=>{var e,t=u(s,"_CTZ.consent",null)||u(s,"_CTZS.consent",null);let o=!0;return o=t?Object.prototype.hasOwnProperty.call(t,"allowed")?"string"==typeof(e=t.allowed)?{true:!0,false:!1}[e]:Boolean(e):(l.info("[CTZ] Consent object present but missing properties :: defaulting to false"),!1):o},h=()=>["script[src*='//static.clicktripz.com/tag.js']","script[src*='//compare-static'][src*='/tag.js']","script[src*='//static.clicktripz.com/r/ucb.js']","script[src*='//compare-static'][src*='/ucb.js']"].map(e=>Array.from(document.querySelectorAll(e))).flat().filter(e=>{var t=e.getAttribute("data-alias")||e.getAttribute("data-publisher"),o=/.*\.js\?(.*)/.exec(e?.src)?.[1];return Object.fromEntries(new URLSearchParams(o)).gwi||t})[0];let r=(t,e)=>{var o,r;return e?(o=a(t))?((r=s.document.createElement("script")).src=o,r.setAttribute("data-ctz-script-type",t),r.type="text/javascript",r.async=!0,r.onload=()=>{try{e(s._ctrequire(t)),l.info("Successfully loaded module :: "+t)}catch(e){l.error(`Exception thrown from running '${t}' module.`,e)}},void(s.document.body||s.document.getElementsByTagName("head")[0]).appendChild(r)):l.error("No URL found for module :: ",t):l.error(`Module '${t}' not loaded. Provide callback to load async from mappings.`)},g=(s._ctrequire=r,(t=>{let o=!1,r;return(...e)=>(o||(o=!0,r=t(...e)),r)})(e=>{if(u(e,["assessment"],!1))return l.info("scripts.main not loaded due to assessment: true");var t=e.scripts.main;r(t,e=>e.init(c))}));function n(n,t){function i(e){g(t),e?.currentTarget?.removeEventListener(e.type,i)}n&&(n.interactionElements||[]).forEach(e=>{var t,o,r,a=s.document.querySelector(e);a?(t=a,o=n.interactionEvents,r=i,o.forEach(e=>{t.addEventListener(e,r)})):l.error(`Element: ${e} not found for ensureLoadForInteractionEvents.`)})}let y=e=>{var t=e?.bootloader;if(!t)return l.info("boot sequence terminated: no Bootloader config found");d("icc",e);var o,r=t.loadOnAny||[],a=r.filter(e=>"timeout"in e&&"number"==typeof e.timeout),r=r.filter(e=>"interactionEvents"in e&&"interactionElements"in e&&0<e.interactionElements?.length&&0<e.interactionEvents?.length);a.length||r.length?(n(r[0],t),e=a[0],o=t,e&&setTimeout(()=>{g(o)},e.timeout||0)):g(t)};async function v(e){try{return(await m("https://api.clicktripz.com/c11g/v0/gw/"+e["@id"],{credentials:"include",method:"POST",body:JSON.stringify({ClientContext:{userAgent:s.navigator.userAgent,locationPath:s.location.pathname,locationSearch:s.location.search,cookie:o(u(e,"clientContext.cookie",[])),dataLayer:(e=>{if(!s?.dataLayer?.slice)return{};let o=s.dataLayer.slice().reverse(),r=null,a=(e,t)=>{for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(o===t){r=e[o];break}!e[o]||"object"!=typeof e[o]||e[o]instanceof Element||a(e[o],t)}};var t=e.map(e=>{r="";for(var t of o)if(a(t,e),r)break;return[e,r]});return Object.fromEntries(t)})(u(e,"clientContext.dataLayer",[]))}})})).json()}catch{l.error("boot sequence terminated: gateway request failure")}}return{determineConstrainUrl:b,get:u,getTag:h,getTagData:e,getUrlForModuleName:a,ensureUserConsent:f,boot:()=>setTimeout(async()=>{if(!f())return l.info("boot sequence terminated: consent.allowed != true");var t=h();if(!t)return l.error("Couldn't find tag.js script element on page. Check for data attributes or 'gwi' query param.");t=e(t);if(d("tagData",t),c.bootloaderConfig){var o=c.bootloaderConfig;let e=await v(o);void y(e)}else{o=await(async e=>{if(e.fpcsEnabled)try{await m("https://www.clicktripz.com/api/integrations/v1/constrain"),d("adblockIsEnabled",!1)}catch{d("adblockIsEnabled",!0)}var t=b(e);try{if(t)return(await m(t,{credentials:"include"})).json()}catch{l.error("boot sequence terminated: constrain request failure")}})(t);if(!o)return l.error("No constrain data found");d("constrain",o);{var r=o;var a=p("tagData")?.isAnonymous||u(s,"_CTZ.user.anonymous"),n=u(r,"data.dmn");let e=u(r,"data.cpid");(i=/(_ctpuid.*?);/.exec(s.document.cookie))&&1<i.length&&(e=i[1].split("=")[1]);var i=new Date;a?i.setMinutes(i.getMinutes()+30):i.setDate(i.getDate()+90),s.document.cookie=`_ctpuid=; expires=Thu, 01 Jan 1970 00:00:00 UTC;domain=${n}; path=/;`,s.document.cookie=`_ctpuid=${e};expires=${i.toUTCString()};domain=${n};path=/;`}if(u(o,"data.userOptedOut",!1))return l.info("boot sequence terminated: userOptedOut != false");let e=await(async e=>{var t=u(p("constrain"),"data.PublisherMetadataModule.publisherAlias",!1)||e.publisherAlias||e.publisherHash,t=`https://${e.apiHostName}/c11g/v0/a/`+t;try{return(await m(t,{method:"POST",body:JSON.stringify({ClientContext:{userAgent:s.navigator.userAgent,locationHostname:s.location.hostname,locationPath:s.location.pathname,locationSearch:s.location.search,documentCookie:s.document.cookie},protocol:"1"}),credentials:"include"})).json()}catch{l.error("boot sequence terminated: client-config request failure")}})(t);a=t.fpcsEnabled?{www:t.hostName,static:t.hostName.replace("compare","compare-static"),images:t.hostName.replace("compare","compare-images")}:{www:"www.clicktripz.com",static:"static.clicktripz.com",images:"images.clicktripz.com"},i=e?.bootloader?.fpcsHostnames||a;d("hostnames",i),y(e)}},0),setBootloaderGlobal:d}},e.exports(window).boot()})();